<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Caretaker - Object Test</title>

	<link rel="stylesheet" href="asset/bootstrap4/css/bootstrap.css">
	<link rel="stylesheet" href="asset/bootstrap-override.css">
	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<!-- Latest compiled JavaScript -->
	<script src="asset/polyfill/fetch.min.js"></script>
	<script src="asset/polyfill/promise.min.js"></script>
	<script src="asset/bootstrap4/js/bootstrap.js"></script>
	<script src="asset/moment/moment.js"></script>
	<script src="asset/react/build/react.js"></script>
	<script src="asset/react/build/react-dom.js"></script>
	<script src="../dist/caretaker.js"></script>
	<script src="../dist/caretaker.extension.js"></script>
	<link href="../dist/caretaker.css" rel="stylesheet"></link>
	<link href="../dist/caretaker.extension.css" rel="stylesheet"></link>
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-4 text-center">
				<h6>Validation Test</h6>
			</div>
			<div class="col-md-4">
				<div id="form-container"></div>
			</div>
			<div class="col-md-4">
				<pre id="pre"></pre>
			</div>
		</div>
	</div>
	<script async>
		var validationModel = {
			label: "Validation Test",
			name: "validation_test_object",
			has: [
				{
					label: "many",
					name: "text",
					type: "text"
				},
				{
					label: "many text",
					name: "many_text",
					type: "text",
					quantity: "many"
				},
				{
					label: "object",
					name: "object",
					type: "object",
					has: [
						{
							"label": "object>many-text",
							"name": "text",
							"type": "text",
							"quantity": "many"
						}
					]
				},
				{
					quantity: "many",
					label: "many-object",
					name: "many-object",
					type: "object",
					has:[
						{
							"label": "many-object>many-text",
							"name": "text",
							"type": "text",
							"quantity": "many"
						}
					]
				}
			]
		}
		var formCommand = {
			edit: validationModel,
			action: "",
			submittable: true,
			resettable: true,
			action: "http://localhost:3000",
			afterSuccess: function(response){
				response.json().then(function(val){
					window['pre'].innerText = JSON.stringify(JSON.parse(val.validation_test_object), null, 2)
				})
			}
		}
		var theForm = ReactDOM.render(React.createElement(CaretakerForm, formCommand), window['form-container'])
	</script>
</body>
</html>
